from Redy.Opt import *
from dis import dis


@feature(goto)
def very_big_loop(x):
    task1: label
    task2: label
    end: label

    with task1:
        if x == 'end':
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')
            print('jump end')

            end.jump()
        elif x == '1':
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')
            print('jump task1')

            task1.jump()
        elif x == '2':
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')
            print('jump task2')

            task2.jump()

        raise ValueError

    task2.mark()
    print('task2| then turn to task1.')
    task1.jump()

    end.mark()
    print('good bye')


def test_loop():
    dis(very_big_loop)

    very_big_loop('1')
    very_big_loop('2')
    very_big_loop('end')
